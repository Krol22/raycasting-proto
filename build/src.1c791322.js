parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"qu/t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.map=void 0;var e=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,2,2,2,2,2,0,0,0,0,3,0,3,0,3,0,0,0,1],[1,0,0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,2,0,0,0,2,0,0,0,0,3,0,0,0,3,0,0,0,1],[1,0,0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,2,2,0,2,2,0,0,0,0,3,0,3,0,3,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,4,0,4,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,4,0,0,0,0,5,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,4,0,4,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,4,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]];exports.map=e;
},{}],"Focm":[function(require,module,exports) {
"use strict";var a=require("./map"),t=function(a,t,e,o,n){return o+(n-o)/(e-t)*(a-t)},e=document.querySelector("#game-canvas").getContext("2d"),o=document.querySelector("#floor-canvas").getContext("2d");e.webkitImageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.imageSmoothingEnabled=!1;var n,r,i,h,c,s,l,d,m=22,f=10,u=-1,v=0,g=0,M=0,w=.66,p=function(a){var t=document.createElement("canvas"),e=t.getContext("2d");return t.width=a.width,t.height=a.height,e.imageSmoothingEnabled=!1,e.drawImage(a,0,0),e.getImageData(0,0,a.width,a.height)};function k(a,t,e,o,n){e.data[o]=a.data[t],e.data[o+1]=a.data[t+1],e.data[o+2]=a.data[t+2],e.data[o+3]=n}var b=800,y=400,I=function(){for(var o=function(o){s=u+M*(c=2*o/b-1),l=v+w*c;var r=Math.floor(m),g=Math.floor(f),p=Math.sqrt(1+l*l/(s*s)),I=Math.sqrt(1+s*s/(l*l)),q=void 0,S=void 0,E=void 0,C=void 0,R=void 0,x=void 0;s<0?(S=-1,C=(m-r)*p):(S=1,C=(r+1-m)*p),l<0?(E=-1,R=(f-g)*I):(E=1,R=(g+1-f)*I);for(var D=[];C<R?(C+=p,r+=S,r=Math.floor(r),x=0):(R+=I,g+=E,g=Math.floor(g),x=1),!(a.map[r][g]>0&&(D.push({mapX:r,mapY:g,side:x,value:a.map[r][g]}),3!==a.map[r][g])););D.reverse().forEach(function(r){var c=r.mapX,u=r.mapY,v=r.side,g=r.value;q=0===v?(c-m+(1-S)/2)/s:(u-f+(1-E)/2)/l;var M,w,p=Math.floor(Math.abs(y/q)),I=y/2+p/2,C=I-p;switch(3===g&&(C=(I=y/2+p/2)-p/g),a.map[c][u]){case 1:M="red",1===v&&(M="salmon");break;case 2:M="green",1===v&&(M="springgreen");break;case 3:M="blue",1===v&&(M="skyblue");break;case 4:M="white",1===v&&(M="whitesmoke")}w=0===v?f+q*l:m+q*s,w-=Math.floor(w);var R,x,D=16,F=Math.floor((w-Math.floor(w))*D);e.fillStyle=M,e.fillRect(o,I,1,C-I),3===g?e.drawImage(d,F,0,1,D,o,C,1,p/g):e.drawImage(d,F,0,1,D,o,C,1,p),0===v&&s>0?(R=c,x=u+w):0===v&&s<0?(R=c+1,x=u+w):1===v&&l>0?(R=c+w,x=u):(R=c+w,x=u+1),D=16;for(var z=Math.floor(I);z<y;z++){var A=y/(2*z-y),X=A/q,Y=X*R+(1-X)*m,L=X*x+(1-X)*f,P=Math.floor(Y*D)%D,W=4*(D*(Math.floor(L*D)%D)+P),j=t(A,0,8,255,0),B=4*(b*(y-z)+o);k(i,W,n,4*(b*z+o),j),k(h,W,n,B,j)}var G=t(q,0,10,0,1);e.fillStyle="rgba(0, 0, 0, ".concat(G,")"),e.fillRect(o,I,1,C-I)})},r=0;r<b;r++)o(r)},q=function a(){e.clearRect(0,0,800,400),o.clearRect(0,0,800,400),e.save(),n=new ImageData(b,y),I(),e.restore(),o.putImageData(n,0,0),window.requestAnimationFrame(a)},S=.1;window.addEventListener("keydown",function(a){if("w"===a.key&&(f+=.2*v,m+=.2*u),"s"===a.key&&(f-=.2*v,m-=.2*u),"d"===a.key){var t=u;u=u*Math.cos(-S)-v*Math.sin(-S),v=t*Math.sin(-S)+v*Math.cos(-S);var e=M;M=M*Math.cos(-S)-w*Math.sin(-S),w=e*Math.sin(-S)+w*Math.cos(-S)}if("a"===a.key){var o=u;u=u*Math.cos(S)-v*Math.sin(S),v=o*Math.sin(S)+v*Math.cos(S);var n=M;M=M*Math.cos(S)-w*Math.sin(S),w=n*Math.sin(S)+w*Math.cos(S)}"q"===a.key&&(g+=10),"z"===a.key&&(g-=10)});var E=function(a){return new Promise(function(t){var e=new Image;e.src=a,e.onload=function(){t(e)}})};E("Wall.png").then(function(a){return r=p(d=a),E("Floor.png")}).then(function(a){return i=p(a),E("Celling.png")}).then(function(a){h=p(a),window.requestAnimationFrame(q)});
},{"./map":"qu/t"}]},{},["Focm"], null)
//# sourceMappingURL=/src.1c791322.js.map
